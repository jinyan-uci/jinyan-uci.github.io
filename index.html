<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jin Yan — Research & Teaching</title>
  <meta name="description" content="Jin Yan · Physics PhD · Nanophotonics, optics, machine learning. Personal website." />
  <meta name="color-scheme" content="light dark" />
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='48' fill='%23008cff'/%3E%3Ctext x='50' y='58' text-anchor='middle' font-size='54' font-family='system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif' fill='white'%3EJ%3C/text%3E%3C/svg%3E" />
  <style>
    :root{
      --bg:#ffffff; --text:#1f1f1f; --muted:#6b7280; --card:#f8fafc; --border:#e5e7eb;
      --accent:#0ea5e9; --accent-2:#7c3aed; --radius:18px; --shadow:0 10px 30px rgba(0,0,0,.08);
      --max:1100px;
    }
    [data-theme="dark"]{
      --bg:#0b0f14; --text:#e5e7eb; --muted:#9aa4b2; --card:#0f1520; --border:#1f2a37;
      --shadow:0 12px 34px rgba(0,0,0,.35); --accent:#38bdf8; --accent-2:#a78bfa;
    }
    html,body{height:100%}
    body{
      margin:0; font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      background:var(--bg); color:var(--text); text-rendering:optimizeLegibility;
    }
    .wrap{max-width:var(--max); margin-inline:auto; padding:24px}
    header{
      position:sticky; top:0; backdrop-filter:saturate(180%) blur(8px);
      background:color-mix(in oklab,var(--bg) 80%,transparent);
      border-bottom:1px solid var(--border); z-index:50;
    }
    .nav{display:flex; align-items:center; justify-content:space-between; gap:16px}
    .brand{font-weight:700; letter-spacing:.3px}
    nav a{color:var(--muted); text-decoration:none; margin:0 10px}
    nav a:hover{color:var(--text)}
    .btn{display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:999px;
      border:1px solid var(--border); background:var(--card); color:var(--text); text-decoration:none; box-shadow:var(--shadow)}
    .btn:hover{border-color:var(--accent)}
    .hero{padding:60px 0 32px; position:relative; overflow:hidden;}
    .hero h1{font-size:clamp(34px,6vw,56px); line-height:1.08; margin:0 0 10px}
    .gradient{background:linear-gradient(90deg,var(--accent),var(--accent-2)); -webkit-background-clip:text; background-clip:text; color:transparent}
    .lead{color:var(--muted); font-size:clamp(16px,2.6vw,19px); max-width:70ch}

    section{padding:28px 0}
    h2{font-size:24px; margin:0 0 14px}
    .grid{display:grid; gap:16px; grid-template-columns:repeat(12,1fr)}
    .card{grid-column:span 12; border:1px solid var(--border); border-radius:var(--radius); background:var(--card); padding:18px; box-shadow:var(--shadow)}
    .muted{color:var(--muted)}
    @media(min-width:720px){ .card.third{grid-column:span 4} .card.half{grid-column:span 6} }
    .linkcard{display:block; text-decoration:none; color:inherit}
    .linkcard h3{margin:0 0 6px}
    .list{list-style:none; padding:0; margin:0}
    footer{border-top:1px solid var(--border); padding:24px 0 80px; color:var(--muted)}
    .spacer{height:8px}
    .right{display:flex; align-items:center; gap:10px}
    .icon{width:18px; height:18px}

    #fx{ position:absolute; inset:0; width:100%; height:100%; opacity:.18; pointer-events:none; display:block; }
    [data-theme="dark"] #fx{ opacity:.12; }
    @media (prefers-reduced-motion: reduce){ #fx{ display:none } }
  </style>
</head>
<body>
  <header>
    <div class="wrap nav">
      <div class="brand">Jin Yan</div>
      <div class="right">
        <nav aria-label="Primary">
          <a href="/research/">Research</a>
          <a href="/publications/">Publications</a>
          <a href="/projects/">Projects</a>
          <a href="/teaching/">Teaching</a>
          <a href="/contact/">Contact</a>
        </nav>
        <button id="theme" class="btn" title="Toggle theme" aria-label="Toggle theme">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><path d="M12 3a9 9 0 109 9 7.5 7.5 0 01-9-9z"/></svg>
          Theme
        </button>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="hero" id="home">
      <canvas id="fx" aria-hidden="true"></canvas>
      <h1>Hi, I’m <span class="gradient">Jin Yan</span>.</h1>
      <p class="lead">Physics PhD @ UCI · Lee Nano-Optics Lab. I work on <strong>nanophotonics</strong>, meta-optics (meta-optical fibers, ENZ metasurfaces), and nonlinear optics (THG/SHG). I like building clean experiments and clean code.</p>
      <div class="spacer"></div>
      <a class="btn" href="/contact/">Get in touch</a>
    </section>

    <section aria-label="Quick links">
      <h2>Explore</h2>
      <div class="grid">
        <a class="card third linkcard" href="/research/">
          <h3>Research</h3>
          <p class="muted">Meta-optical fibers · ENZ metasurfaces · Nonlinear optics.</p>
        </a>
        <a class="card third linkcard" href="/publications/">
          <h3>Publications</h3>
          <p class="muted">Papers, preprints, and datasets.</p>
        </a>
        <a class="card third linkcard" href="/projects/">
          <h3>Projects</h3>
          <p class="muted">Code & notes: THG/SHG toolkits, meta-fiber prototypes.</p>
        </a>
      </div>
      <div class="grid" style="margin-top:8px">
        <a class="card half linkcard" href="/teaching/">
          <h3>Teaching</h3>
          <p class="muted">TA @ UCI — problem-solving, tidy plots, reproducible analysis.</p>
        </a>
        <a class="card half linkcard" href="/contact/">
          <h3>Contact</h3>
          <p class="muted">Email, GitHub, (add CV / Scholar).</p>
        </a>
      </div>
    </section>

    <footer class="wrap">
      <p class="muted">© <span id="y"></span> Jin Yan. Built from scratch with vanilla HTML/CSS/JS. Hosted on GitHub Pages.</p>
    </footer>
  </main>

  <script>
    // Footer year
    document.getElementById('y').textContent = new Date().getFullYear();

    // Theme toggle with localStorage
    const root = document.documentElement;
    const saved = localStorage.getItem('theme');
    const preferDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    if (saved) root.setAttribute('data-theme', saved);
    else if (preferDark) root.setAttribute('data-theme', 'dark');
    document.getElementById('theme').addEventListener('click', () => {
      const next = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
      root.setAttribute('data-theme', next);
      localStorage.setItem('theme', next);
      initFx(true); // 
    });

    const fx = document.getElementById('fx');
    if (fx) {
      const ctx = fx.getContext('2d');
      let w = 0, h = 0, running = !matchMedia('(prefers-reduced-motion: reduce)').matches;

      function sizeFx(){
        const parent = fx.parentElement;
        const W = Math.min(720, Math.max(480, parent.clientWidth || 720));
        const H = Math.max(260, parent.clientHeight || 320);
        if (W !== w || H !== h){ w = fx.width = Math.floor(W); h = fx.height = Math.floor(H); }
      }
      function hex2rgb(hex){
        const m = (hex||'').trim().match(/^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i);
        return m ? [parseInt(m[1],16), parseInt(m[2],16), parseInt(m[3],16)] : [14,165,233];
      }
      function render(t){
        if (!running) return;
        const [r0,g0,b0] = hex2rgb(getComputedStyle(document.documentElement).getPropertyValue('--accent').trim());
        const img = ctx.createImageData(w, h), data = img.data;
        const x1 = w*0.40, y1 = h*0.32, x2 = w*0.60, y2 = h*0.32;
        const k = 0.055, tt = (t||0) * 0.0017;
        let i = 0;
        for (let y=0; y<h; y++){
          for (let x=0; x<w; x++, i+=4){
            const r1 = Math.hypot(x-x1, y-y1), r2 = Math.hypot(x-x2, y-y2);
            let I = 0.5 * (1 + Math.cos(k*(r1 - r2) - tt));
            const d = Math.hypot(x-w/2, y-h/2)/Math.hypot(w/2,h/2);
            I = Math.max(0, I*(1-0.45*d));
            data[i] = r0*I; data[i+1]=g0*I; data[i+2]=b0*I; data[i+3]=255;
          }
        }
        ctx.putImageData(img, 0, 0);
        requestAnimationFrame(render);
      }
      function initFx(force=false){
        if (!running && !force) return;
        sizeFx();
        running = !matchMedia('(prefers-reduced-motion: reduce)').matches || force;
        if (running) requestAnimationFrame(render);
      }
      initFx();
      addEventListener('resize', sizeFx);
      document.addEventListener('visibilitychange', () => {
        running = !document.hidden && !matchMedia('(prefers-reduced-motion: reduce)').matches;
        if (running) requestAnimationFrame(render);
      });
    }
  </script>
</body>
</html>
