<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jin Yan — Research & Teaching</title>
  <meta name="description" content="Jin Yan · Physics PhD · Nanophotonics, optics, machine learning. Personal website." />
  <meta name="color-scheme" content="light dark" />
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='48' fill='%23008cff'/%3E%3Ctext x='50' y='58' text-anchor='middle' font-size='54' font-family='system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif' fill='white'%3EJ%3C/text%3E%3C/svg%3E" />
  <style>
    :root{
      --bg:#ffffff; --text:#1f1f1f; --muted:#6b7280; --card:#f8fafc; --border:#e5e7eb;
      --accent:#0ea5e9; --accent-2:#7c3aed; --radius:18px; --shadow:0 10px 30px rgba(0,0,0,.08);
      --max:1100px;
      --fx-opacity: 0.22;   
      --fx-contrast: 0.55; 
      --title-shadow: 0 1px 12px rgba(0,0,0,.08);
    }
    [data-theme="dark"]{
      --bg:#0b0f14; --text:#e5e7eb; --muted:#9aa4b2; --card:#0f1520; --border:#1f2a37;
      --shadow:0 12px 34px rgba(0,0,0,.35); --accent:#38bdf8; --accent-2:#a78bfa;
      --fx-opacity: 0.18;    
      --fx-contrast: 0.40;  
      --title-shadow: 0 1px 14px rgba(0,0,0,.35);
    }

    html,body{height:100%}
    body{
      margin:0; font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      background:var(--bg); color:var(--text); text-rendering:optimizeLegibility;
    }
    .wrap{max-width:var(--max); margin-inline:auto; padding:24px}
    header{
      position:sticky; top:0; backdrop-filter:saturate(180%) blur(8px);
      background:color-mix(in oklab,var(--bg) 82%, transparent);
      border-bottom:1px solid var(--border); z-index:50;
    }
    .nav{display:flex; align-items:center; justify-content:space-between; gap:16px}
    .brand{font-weight:700; letter-spacing:.3px}
    nav a{color:var(--muted); text-decoration:none; margin:0 10px}
    nav a:hover{color:var(--text)}
    .btn{display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:999px;
      border:1px solid var(--border); background:var(--card); color:var(--text); text-decoration:none; box-shadow:var(--shadow)}
    .btn:hover{border-color:var(--accent)}

    .hero{
      position:relative; overflow:hidden;
      padding: clamp(54px, 8vh, 80px) 0 36px;
      min-height: min(70vh, 680px);
      isolation:isolate;
    }
    .hero h1{
      font-size:clamp(34px,6vw,56px);
      line-height:1.08; margin:0 0 10px;
      text-wrap:balance;
      filter: drop-shadow(var(--title-shadow));
    }
    .gradient{background:linear-gradient(90deg,var(--accent),var(--accent-2)); -webkit-background-clip:text; background-clip:text; color:transparent}
    .lead{color:var(--muted); font-size:clamp(16px,2.6vw,19px); max-width:70ch}
    .hero::before{
      content:""; position:absolute; inset:0; pointer-events:none; z-index:0;
      background:
        radial-gradient(120% 120% at 50% 35%,
          color-mix(in oklab, var(--bg) 0%, transparent) 0%,
          color-mix(in oklab, var(--bg) calc(var(--fx-contrast)*85%), transparent) 55%,
          color-mix(in oklab, var(--bg) calc(var(--fx-contrast)*100%), transparent) 100%);
      mix-blend-mode:normal;
    }

    #fx{
      position:absolute; inset:0; width:100%; height:100%;
      opacity:var(--fx-opacity); pointer-events:none; z-index:-1; 
      -webkit-mask-image: radial-gradient(140% 140% at 50% 40%, #000 58%, transparent 100%);
              mask-image: radial-gradient(140% 140% at 50% 40%, #000 58%, transparent 100%);
    }

    section{padding:28px 0}
    h2{font-size:24px; margin:0 0 14px}
    .grid{display:grid; gap:16px; grid-template-columns:repeat(12,1fr)}
    .card{grid-column:span 12; border:1px solid var(--border); border-radius:var(--radius); background:var(--card); padding:18px; box-shadow:var(--shadow)}
    .muted{color:var(--muted)}
    @media(min-width:720px){ .card.third{grid-column:span 4} .card.half{grid-column:span 6} }
    .linkcard{display:block; text-decoration:none; color:inherit}
    .linkcard h3{margin:0 0 6px}
    .list{list-style:none; padding:0; margin:0}
    footer{border-top:1px solid var(--border); padding:24px 0 80px; color:var(--muted)}
    .spacer{height:8px}
    .right{display:flex; align-items:center; gap:10px}
    .icon{width:18px; height:18px}
  </style>
</head>
<body>
  <header>
    <div class="wrap nav">
      <div class="brand">Jin Yan</div>
      <div class="right">
        <nav aria-label="Primary">
          <a href="/research/">Research</a>
          <a href="/publications/">Publications</a>
          <a href="/projects/">Projects</a>
          <a href="/teaching/">Teaching</a>
          <a href="/contact/">Contact</a>
        </nav>
        <button id="theme" class="btn" title="Toggle theme" aria-label="Toggle theme">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><path d="M12 3a9 9 0 109 9 7.5 7.5 0 01-9-9z"/></svg>
          Theme
        </button>
      </div>
    </div>
  </header>

  <main>
    <section class="hero" id="home">
      <canvas id="fx" aria-hidden="true"></canvas>
      <div class="wrap">
        <h1>Hi, I’m <span class="gradient">Jin Yan</span>.</h1>
        <p class="lead">Physics PhD @ UCI · Lee Nano-Optics Lab. I work on <strong>nanophotonics</strong>, meta-optics (meta-optical fibers, ENZ metasurfaces), and nonlinear optics (THG/SHG). I like building clean experiments and clean code.</p>
        <div class="spacer"></div>
        <a class="btn" href="/contact/">Get in touch</a>
      </div>
    </section>

    <section aria-label="Quick links">
      <div class="wrap">
        <h2>Explore</h2>
        <div class="grid">
          <a class="card third linkcard" href="/research/">
            <h3>Research</h3>
            <p class="muted">Meta-optical fibers · ENZ metasurfaces · Nonlinear optics.</p>
          </a>
          <a class="card third linkcard" href="/publications/">
            <h3>Publications</h3>
            <p class="muted">Papers, preprints, and datasets.</p>
          </a>
          <a class="card third linkcard" href="/projects/">
            <h3>Projects</h3>
            <p class="muted">Code & notes: THG/SHG toolkits, meta-fiber prototypes.</p>
          </a>
        </div>
        <div class="grid" style="margin-top:8px">
          <a class="card half linkcard" href="/teaching/">
            <h3>Teaching</h3>
            <p class="muted">TA @ UCI — problem-solving, tidy plots, reproducible analysis.</p>
          </a>
          <a class="card half linkcard" href="/contact/">
            <h3>Contact</h3>
            <p class="muted">Email, GitHub, (add CV / Scholar).</p>
          </a>
        </div>
      </div>
    </section>

    <footer class="wrap">
      <p class="muted">© <span id="y"></span> Jin Yan. Built from scratch with vanilla HTML/CSS/JS. Hosted on GitHub Pages.</p>
    </footer>
  </main>

  <script>
    document.getElementById('y').textContent = new Date().getFullYear();

    const root = document.documentElement;
    const saved = localStorage.getItem('theme');
    const preferDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    if (saved) root.setAttribute('data-theme', saved);
    else if (preferDark) root.setAttribute('data-theme', 'dark');

    document.getElementById('theme').addEventListener('click', () => {
      const next = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
      root.setAttribute('data-theme', next);
      localStorage.setItem('theme', next);
      initFx(true);
    });


    const fx = document.getElementById('fx');

    if (fx) {
      const ctx = fx.getContext('2d', { willReadFrequently: false });
      let W = 0, H = 0, running = false, frameId = null;

      const DPR = Math.min(1.75, window.devicePixelRatio || 1);
      const RES = 0.85;      
      const SPEED = 0.0016;    
      const K = 0.055;     
      const FALLOFF = 0.48;    

      let mx = 0, my = 0, tx = 0, ty = 0;
      let hasPointer = false;

      function getAccentRGB(){
        const v = getComputedStyle(document.documentElement).getPropertyValue('--accent').trim();
        const m = v.match(/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i);
        if (!m) return [56,189,248]; // fallback: sky-400
        return [parseInt(m[1],16), parseInt(m[2],16), parseInt(m[3],16)];
      }
      let [r0,g0,b0] = getAccentRGB();

      let img = null, data = null;

      function sizeFx(){
        const rect = fx.getBoundingClientRect();
        const wCss = Math.max(480, rect.width || 720);
        const hCss = Math.max(260, rect.height || 320);

        const w = Math.floor(wCss * RES * DPR);
        const h = Math.floor(hCss * RES * DPR);

        if (w !== W || h !== H) {
          W = fx.width = w;
          H = fx.height = h;
          img = ctx.createImageData(W, H);
          data = img.data;
          tx = mx = W * 0.5;
          ty = my = H * 0.38;
        }
      }

      function toLocalCoords(clientX, clientY){
        const rect = fx.getBoundingClientRect();
        const xCss = clientX - rect.left;
        const yCss = clientY - rect.top;
        return [ xCss * (W / rect.width), yCss * (H / rect.height) ];
      }

      const hero = document.getElementById('home');
      function pointerMove(e){
        hasPointer = true;
        const pt = e.touches ? e.touches[0] : e;
        [tx, ty] = toLocalCoords(pt.clientX, pt.clientY);
      }
      function pointerLeave(){
        hasPointer = false;
      }
      hero.addEventListener('mousemove', pointerMove, { passive: true });
      hero.addEventListener('touchmove', pointerMove, { passive: true });
      hero.addEventListener('mouseleave', pointerLeave);
      hero.addEventListener('touchend', pointerLeave);

      function render(t){
        if (!running) return;

        const ease = hasPointer ? 0.12 : 0.06;
        mx += (tx - mx) * ease;
        my += (ty - my) * ease;

        const x1 = mx, y1 = my;
        const x2 = W - mx, y2 = my;

        const phase = (t || 0) * SPEED;

        let i = 0;
        const cx = W * 0.5, cy = H * 0.45;
        const maxD = Math.hypot(cx, cy);

        for (let y=0; y<H; y++){
          for (let x=0; x<W; x++, i+=4){
            const r1 = Math.hypot(x - x1, y - y1);
            const r2 = Math.hypot(x - x2, y - y2);
            let I = 0.5 * (1 + Math.cos(K * (r1 - r2) - phase)); // 0..1

            const d = Math.hypot(x - cx, y - cy) / maxD;
            I *= Math.max(0, 1 - FALLOFF * d);

            data[i]   = r0 * I;
            data[i+1] = g0 * I;
            data[i+2] = b0 * I;
            data[i+3] = 255;
          }
        }
        ctx.putImageData(img, 0, 0);
        frameId = requestAnimationFrame(render);
      }

      function start(){
        if (running) return;
        if (matchMedia('(prefers-reduced-motion: reduce)').matches) {
          sizeFx();
          [r0,g0,b0] = getAccentRGB();
          running = true;
          render(0);
          running = false;
          return;
        }
        sizeFx();
        [r0,g0,b0] = getAccentRGB();
        running = true;
        frameId = requestAnimationFrame(render);
      }

      function stop(){
        running = false;
        if (frameId) cancelAnimationFrame(frameId);
        frameId = null;
      }

      function initFx(force=false){
        if (force) stop();
        start();
      }

      initFx();
      addEventListener('resize', () => initFx(true));
      document.addEventListener('visibilitychange', () => {
        if (document.hidden) stop(); else initFx(true);
      });

      window.initFx = initFx;
    }
  </script>
</body>
</html>
